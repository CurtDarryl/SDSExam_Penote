@model SDSExam_Penote.Models.RecyclableItem

@using System.Web.Mvc
@using System.Web.Mvc.Html

<div class="form-group">
    @Html.LabelFor(model => model.Id, htmlAttributes: new { @class = "control-label col-md-2" })
    <div class="col-md-10">
        @Html.TextBoxFor(model => model.Id, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.Id)
    </div>
</div>

<div class="form-group">
    @Html.LabelFor(model => model.RecyclableTypeId)
    <div class="col-md-10">
        @Html.DropDownListFor(model => model.RecyclableTypeId, (SelectList)ViewBag.RecyclableTypes, "Select Type", new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.RecyclableTypeId)
    </div>
</div>

<div class="form-group">
    @Html.LabelFor(model => model.Weight, htmlAttributes: new { @class = "control-label col-md-2" })
    <div class="col-md-10">
        @Html.EditorFor(model => model.Weight, new { htmlAttributes = new { @class = "form-control" } })
        @Html.ValidationMessageFor(model => model.Weight)
    </div>
</div>

<div class="form-group">
    @Html.LabelFor(model => model.ItemDescription, htmlAttributes: new { @class = "control-label col-md-2" })
    <div class="col-md-10">
        @Html.EditorFor(model => model.ItemDescription, new { htmlAttributes = new { @class = "form-control" } })
        @Html.ValidationMessageFor(model => model.ItemDescription)
    </div>
</div>

@*@section Scripts {
    <script>
        let typeRates = @Html.Raw(Json.Encode(ViewBag.TypeRates));

        function computeRate() {
            let typeId = $('#RecyclableTypeId').val();
            let weight = parseFloat($('#weight').val());
            if (typeId && typeRates[typeId] && !isNaN(weight)) {
                let rate = parseFloat(typeRates[typeId].Rate);
                let min = parseFloat(typeRates[typeId].MinKg);
                let max = parseFloat(typeRates[typeId].MaxKg);
                if (weight < min || weight > max) {
                    alert('Weight must be between ' + min + ' and ' + max);
                    $('#weight').val('');
                    $('#computedRate').val('');
                } else {
                    $('#computedRate').val((weight * rate).toFixed(2));
                }
            }
        }

        $('#RecyclableTypeId, #weight').change(computeRate);
    </script>
}*@